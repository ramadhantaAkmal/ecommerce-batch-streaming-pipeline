version: 2

models:
  - name: mart_fraud_prevented_revenue
    description: |
      Monthly summary of revenue protected by the fraud detection system.
      Shows exactly how much money was saved by correctly identifying and blocking fraud orders.
      This is the #1 KPI to justify the existence and budget of the Fraud/Risk team.

    columns:
      - name: order_month
        description: "First day of the month"
        tests:
          - unique
          - not_null

      - name: year
      - name: month
      - name: year_month

      - name: blocked_fraud_orders
        description: "Number of fraudulent orders successfully blocked"

      - name: total_saved_amount
        description: "Total monetary value prevented from being lost to fraud"
      
      - name: avg_saved_per_fraud_order
        description: "Average size of blocked fraudulent transaction"

      - name: monthly_fraud_prevented_revenue
        description: "Final headline number: How much revenue the fraud system saved this month"
        tests:
          - not_null